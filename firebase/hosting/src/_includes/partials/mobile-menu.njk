{# Get navigation data based on language #}
{% set nav = navigation[langCode] | default(navigation.pt) %}
{% set seg = segments[langCode] | default(segments.pt) %}

<!-- Mobile Menu -->
<div class="mobile-menu">
    <div class="mobile-menu-content">
        {% for link in nav.mobileLinks %}
        <a href="{% if link.external %}{{ relPath }}{{ link.href | prettyUrl }}{% elif (link.href | first) == '#' and not isHomepage %}{{ relPath }}{{ indexPage | default('index.html') | prettyUrl }}{{ link.href }}{% else %}{{ link.href }}{% endif %}">{{ link.label }}</a>
        {# Mobile Segments Accordion - After Screenshots (2nd item) #}
        {% if loop.index == 2 and seg.links %}
        <div class="mobile-segments">
            <button class="mobile-segments-trigger" aria-expanded="false">
                {{ seg.title }}
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <div class="mobile-segments-content">
                {% for segment in seg.links %}
                <a href="{{ relPath }}{{ segment.href | prettyUrl }}">{{ segment.label }}</a>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        {% endfor %}
        <div class="mobile-lang">
            {% for langItem in langSwitch %}
            <a href="{{ langItem.href | prettyUrl }}"{% if langItem.active %} class="active"{% endif %} data-ga="select_content" data-ga-detail="lang_{{ langItem.code | lower }}">{{ langItem.code }}</a>
            {% endfor %}
        </div>
        <a href="{% if not isHomepage %}{{ relPath }}{{ indexPage | default('index.html') | prettyUrl }}{% endif %}#download" class="btn btn-primary" data-ga="select_content" data-ga-detail="navbar_cta_mobile">{{ nav.cta }}</a>
    </div>
</div>
