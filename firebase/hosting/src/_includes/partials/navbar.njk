{# Get navigation data based on language #}
{% set nav = navigation[langCode] | default(navigation.pt) %}
{% set seg = segments[langCode] | default(segments.pt) %}

<!-- Navigation -->
<nav class="navbar{% if navbarScrolled %} scrolled{% endif %}">
    <div class="nav-container">
        <a href="{{ relPath }}{{ indexPage | default('index.html') | prettyUrl }}" class="nav-logo">
            <img src="{{ relPath }}assets/images/logo.png" alt="PraticOS" class="logo-img">
            <span class="logo-text">{{ site.logoText | safe }}</span>
        </a>
        <div class="nav-links">
            {% for link in nav.links %}
            <a href="{% if link.external %}{{ relPath }}{{ link.href | prettyUrl }}{% elif link.href == '#screenshots' and segmentSlug %}#hero{% elif (link.href | first) == '#' and not isHomepage and not segmentSlug %}{{ relPath }}{{ indexPage | default('index.html') | prettyUrl }}{{ link.href }}{% else %}{{ link.href }}{% endif %}">{{ link.label }}</a>
            {# Segments Dropdown - After Screenshots #}
            {% if loop.index == 2 and seg.links %}
            <div class="nav-dropdown">
                <button class="nav-dropdown-trigger" aria-expanded="false" aria-haspopup="true">
                    {{ seg.title }}
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2.5 4.5L6 8L9.5 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <div class="nav-dropdown-menu">
                    <div class="nav-dropdown-grid">
                        {% for segment in seg.links %}
                        <a href="{{ relPath }}{{ segment.href | prettyUrl }}" class="nav-dropdown-item">{{ segment.label }}</a>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        <div class="nav-actions">
            <div class="lang-switch">
                {% for langItem in langSwitch %}
                <a href="{{ langItem.href | prettyUrl }}"{% if langItem.active %} class="active"{% endif %} data-ga="select_content" data-ga-detail="lang_{{ langItem.code | lower }}">{{ langItem.code }}</a>
                {% endfor %}
            </div>
            <button class="theme-toggle" aria-label="Toggle theme">
                <svg class="theme-icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                <svg class="theme-icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
            </button>
            <a href="{% if not isHomepage and not segmentSlug %}{{ relPath }}{{ indexPage | default('index.html') | prettyUrl }}{% endif %}#download" class="btn btn-primary" data-ga="select_content" data-ga-detail="navbar_cta">{{ nav.cta }}</a>
        </div>
        <button class="nav-toggle" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</nav>
