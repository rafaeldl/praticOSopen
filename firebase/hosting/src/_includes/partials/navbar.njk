{# Get navigation data based on language #}
{% set nav = navigation[langCode] | default(navigation.pt) %}
{% set seg = segments[langCode] | default(segments.pt) %}

<!-- Navigation -->
<nav class="navbar{% if navbarScrolled %} scrolled{% endif %}">
    <div class="nav-container">
        <a href="{{ relPath }}{{ indexPage | default('index.html') }}" class="nav-logo">
            <img src="{{ relPath }}assets/images/logo.png" alt="PraticOS" class="logo-img">
            <span class="logo-text">{{ site.logoText | safe }}</span>
        </a>
        <div class="nav-links">
            {% for link in nav.links %}
            <a href="{% if link.external %}{{ relPath }}{{ link.href }}{% elif link.href == '#screenshots' and segmentSlug %}{{ relPath }}{{ indexPage | default('index.html') }}#screenshots{% elif (link.href | first) == '#' and not isHomepage and not segmentSlug %}{{ relPath }}{{ indexPage | default('index.html') }}{{ link.href }}{% else %}{{ link.href }}{% endif %}">{{ link.label }}</a>
            {# Segments Dropdown - After Screenshots #}
            {% if loop.index == 2 and seg.links %}
            <div class="nav-dropdown">
                <button class="nav-dropdown-trigger" aria-expanded="false" aria-haspopup="true">
                    {{ seg.title }}
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2.5 4.5L6 8L9.5 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <div class="nav-dropdown-menu">
                    <div class="nav-dropdown-grid">
                        {% for segment in seg.links %}
                        <a href="{{ relPath }}{{ segment.href }}" class="nav-dropdown-item">{{ segment.label }}</a>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        <div class="nav-actions">
            <div class="lang-switch">
                {% for langItem in langSwitch %}
                <a href="{{ langItem.href }}"{% if langItem.active %} class="active"{% endif %}>{{ langItem.code }}</a>
                {% endfor %}
            </div>
            <a href="{% if not isHomepage and not segmentSlug %}{{ relPath }}{{ indexPage | default('index.html') }}{% endif %}#download" class="btn btn-primary">{{ nav.cta }}</a>
        </div>
        <button class="nav-toggle" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</nav>
