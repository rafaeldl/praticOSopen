---
layout: layouts/base.njk
navbarScrolled: true
docsStyles: true
pageType: docs
---

<!-- Page Header -->
<section class="docs-hero compact">
    <div class="hero-bg">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
    </div>
    <div class="container">
        <div class="docs-breadcrumb">
            <a href="{{ docsIndexLink }}">{{ breadcrumbRoot }}</a>
            <span>/</span>
            <span>{{ breadcrumbCurrent }}</span>
        </div>
        <div class="docs-hero-content">
            <h1>{{ heroTitle }} <span class="gradient-text">{{ heroTitleHighlight }}</span></h1>
            <p class="hero-subtitle">{{ heroSubtitle }}</p>
        </div>
    </div>
</section>

<!-- Docs Content -->
<section class="docs-content">
    <div class="container docs-container">
        <!-- Sidebar Navigation -->
        <aside class="docs-sidebar">
            <div class="sidebar-sticky">
                <h4>{{ sidebarTitle }}</h4>
                <nav class="docs-nav">
                    {% for item in sidebarNav %}
                    <a href="#{{ item.id }}"{% if loop.first %} class="active"{% endif %}>{{ item.label }}</a>
                    {% endfor %}
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="docs-main">
            {# If docsData is defined, render from JSON; otherwise render content from njk file #}
            {% if docsData %}
                {# Access the data file based on the docsData path (e.g., "docs/perfis" -> docs.perfis) #}
                {% set dataFile = docs[docsData | replace("docs/", "")] %}
                {% set langData = dataFile[langCode] %}
                {% if langData and langData.sections %}
                    {% for section in langData.sections %}
                        {% set section = section %}
                        {% include "components/docs/section-renderer.njk" %}
                    {% endfor %}
                {% endif %}
            {% else %}
                {{ content | safe }}
            {% endif %}

            <!-- Navigation -->
            <div class="docs-navigation">
                {% if prevLink %}
                <a href="{{ prevLink.href }}" class="nav-link prev">
                    <span class="nav-direction">&#8592; {{ prevLink.label }}</span>
                    <span class="nav-title">{{ prevLink.title }}</span>
                </a>
                {% endif %}
                {% if nextLink %}
                <a href="{{ nextLink.href }}" class="nav-link next">
                    <span class="nav-direction">{{ nextLink.label }} &#8594;</span>
                    <span class="nav-title">{{ nextLink.title }}</span>
                </a>
                {% endif %}
            </div>
        </main>
    </div>
</section>

<script>
    // Sidebar navigation active state
    const sections = document.querySelectorAll('.docs-section');
    const navLinks = document.querySelectorAll('.docs-nav a');

    const observerOptions = {
        rootMargin: '-100px 0px -70% 0px',
        threshold: 0
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                navLinks.forEach(link => link.classList.remove('active'));
                const activeLink = document.querySelector(`.docs-nav a[href="#${entry.target.id}"]`);
                if (activeLink) activeLink.classList.add('active');
            }
        });
    }, observerOptions);

    sections.forEach(section => observer.observe(section));

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                const offset = 100;
                const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - offset;
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
</script>
