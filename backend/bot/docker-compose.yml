version: '3.8'

services:
  clawdbot-gateway:
    build: .
    container_name: praticos-bot-gateway
    restart: always
    ports:
      - "18791:18789"
    volumes:
      - ./workspace:/app/workspace  # Pasta para memória do bot (agentes, memórias diárias)
      - ./logs:/app/logs            # Pasta para logs
      - ./clawdbot.json:/root/.clawdbot/clawdbot.json # Sua configuração do número de WhatsApp
      - ./credentials:/root/.clawdbot/credentials # Credenciais (Google, WhatsApp, etc)
    environment:
      - CLAWDBOT_GATEWAY_PORT=18789
      - CLAWDBOT_GATEWAY_BIND=lan
      # PraticOS API Configuration
      # Para teste local: http://host.docker.internal:5001/praticos-app/southamerica-east1/api
      # Para produção: https://southamerica-east1-praticos-app.cloudfunctions.net/api
      - PRATICOS_API_URL=${PRATICOS_API_URL:-http://host.docker.internal:5001/praticos-app/southamerica-east1/api}
      - PRATICOS_API_KEY=${PRATICOS_API_KEY:-bot_praticos_dev_key}
    extra_hosts:
      - "host.docker.internal:host-gateway"
